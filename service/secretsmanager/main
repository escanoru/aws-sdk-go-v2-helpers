package secretsmanager

import (
	"context"
	"log"

	"github.com/aws/aws-sdk-go/aws"
	"github.com/aws/aws-sdk-go/service/ec2"
	"github.com/escanoru/aws-sdk-go-v2-helpers/tree/main/errors"
)

func DescribeSecret(ctx context.Context, cfg aws.Config, amiID *string) {
	ec2Client := ec2.NewFromConfig(cfg)
	filtro := &ec2.DeregisterImageInput{
		ImageId: amiID,
	}
	_, err := ec2Client.DeregisterImage(ctx, filtro)
	errors.CheckAWSError(err)
	log.Printf("AMI ID %s was successfully deregistered", *amiID)
	errors.
}
